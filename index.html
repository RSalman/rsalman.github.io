<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Infinite Scroll â€“ Height & Scroll Demo</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    /* Fixed header with stats */
    #header{
      position:fixed;top:0;left:0;width:100%;
      padding:0.7rem 1rem;
      font:600 16px/1.4 system-ui,sans-serif;
      background:#111;color:#fff;display:flex;gap:2rem;
      box-shadow:0 2px 4px rgba(0,0,0,.3);z-index:10;
    }
    #header span{font-weight:400}

    #blockContainer{
      margin-top:3rem;           /* room for header */
      padding:1rem;display:flex;flex-wrap:wrap;gap:0.6rem;
    }
    .hBlock{
      width:120px;height:120px;display:inline-flex;
      align-items:center;justify-content:center;
      font:500 14px/1.2 system-ui,sans-serif;color:#333;
      background:#eaeaea;border-radius:8px;
      box-shadow:inset 0 0 4px rgba(0,0,0,.1);user-select:none;
    }
  </style>
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "r8sgofx20x");
  </script>
</head>
<body>
  <div id="header">
    <div>Max Height: <span id="maxHeight">--</span> px</div>
    <div>Current Scroll: <span id="curScroll">--</span> px</div>
  </div>

  <div id="blockContainer"></div>

  <script>
    /* ---  Config  ------------------------------------------------------- */
    const INITIAL_BLOCKS = 400;   // first load
    const BATCH_SIZE     = 200;   // added each time we near the bottom
    const THRESHOLD_PX   = 500;   // distance from bottom to trigger load
    /* ------------------------------------------------------------------- */

    const container = document.getElementById('blockContainer');
    const maxOut    = document.getElementById('maxHeight');
    const curOut    = document.getElementById('curScroll');

    let nextBlockNum = 1;         // keeps counting upward
    let loading      = false;     // prevents double-add

    function addBlocks(count){
      loading = true;
      const frag = document.createDocumentFragment();
      for(let i=0;i<count;i++){
        const d  = document.createElement('div');
        d.className='hBlock';
        d.textContent = `Block ${nextBlockNum++}`;
        frag.appendChild(d);
      }
      container.appendChild(frag);
      updateStats();
      loading = false;
    }

    /* Live stats */
    function updateStats(){
      maxOut.textContent = document.documentElement.scrollHeight.toLocaleString();
      curOut.textContent = Math.round(window.scrollY).toLocaleString();
    }

    /* Infinite-scroll handler */
    function handleScroll(){
      updateStats();
      const bottomDist = document.documentElement.scrollHeight - (window.scrollY + window.innerHeight);
      if(bottomDist < THRESHOLD_PX && !loading){
        addBlocks(BATCH_SIZE);
      }
    }

    /* Init */
    window.addEventListener('load',   ()=>{ addBlocks(INITIAL_BLOCKS); });
    window.addEventListener('resize', updateStats);
    window.addEventListener('scroll', handleScroll);
  </script>
</body>
</html>
